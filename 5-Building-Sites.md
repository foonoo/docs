# Building Sites

We've already established Foonoo's multi-site generator architecture, and we've also briefly looked at how it ships with a default site generator. In this chapter, we'll go into the details of how sites can be built with this default site generator. By the end of this chapter you should be able to build simple sites, like a personal home page, or complex ones, like the one serving this documentation.

Foonoo's default site generator provides a unique way of combining templates, text files, and even data in some cases to generate sites. For most parts, the default generator depends heavily on its themes to provide most of the features needed to tie sites together, like menus. In this section, we will take a look at how the default site generator works, and we'll look at how the default theme that ships with Foonoo allows us to build complex sites.

## The Default Site Generator and Theming
Sites in foonoo always have themes enabled when being generated. When you're simply rendering text files, the default site generator and its default theme are used. The default theme that ships with foonoo's default site generator is called Ashes. Ashes is highly configurable, and it allows you to significantly personalize sites to your taste. But you don't have to stick with Ashes; you always have the opportunity to use your own themes.

When generating simple sites, where you're merely rendering Markdown files, Ashes simply wraps the processed HTML output of the text file with HTML code that attaches a simple stylesheet to decorate the text. Beyond this blank default however, Ashes can be configured to provide other valuable features, like title bars, navigation blocks, and even special colour schemes.

## Defining your own Templates
Templates are the basis of themes. They define which HTML (or other) code to be generated by supplying partial code with holes that must be filled in. Templating for foonoo is provided by the honam template engine that ships with the ntentan framework. Honam provides a hierarchical template resolution system where a given hierarchy of paths is searched in its order when searching for templates to render HTML files.

The template hierarchy for resolving any foonoo template is somewhat fixed, and it's defined as follows in decreasing order of search priority:

- Templates in the `_foonoo/templates` directory are searched and applied first. These templates will typically be supplied by the person building the site, and they carry the highest priority to override any other templates.
- Next templates in special template paths supplied through the `templates` configuration of the `site.yml` file are searched. These templates can also be supplied by the site designer, and they are useful when you want to add your own templates outside the `_foonoo` directory.
- Afterwards, templates from the current active theme are searched. These templates are supplied by theme designers and are part of the current theme in use. Most template requests are expected to resolve here.
- Finally, the last place searched contains the built in templates for foonoo's tag parser. These templates are built into foonoo and they are meant to provide the templates for the HTML code generated by the tag parser (for things like links and images). 

So, now that we know how to find templates, how do we override them? Well, it's quite simple: the actual templates available at any time are mainly defined by the active theme and foonoo's tag parser. To override those, you best option will be to create your own templates and place them in the `_foonoo/templates` directory.

### Overriding the Layout wrapper for the default theme
As an example, let's override the layout of the Ashes theme. To do this, you could create a `layout.tplphp` file and place it into the `_foonoo/templates` directory. This template is required by Ashes to wrap all rendered content. A PHP variable named `$body`, which contains the rendered HTML for any content, is exposed to the layout. You can put the following code into the `layout.tplphp` file:

````php
<html>
	<head><title>Some Title Site!</title></head>
	<body>
		<h1>Some Title Site</h1>
		<hr/>
		<?= $body ?>
	</body>
</html>
````

Now, if you go ahead and place this `layout.tplphp` file into the `_foonoo/templates` directory of our earlier [[example|Introduction]], you should have the following output:

[[The site after the layout code above has been applied|hello_layout_screenshot.png|figure="frame"]]

Neat! Right? Well, if you look carefully you should realize a big problem. Compared to the earlier example, this output is devoid of any styling, and rightfully so, because all the styling is supplied by Ashes whose template we just overrode. But even more prominently, you should notice that only the raw HTML code was output. This is because the HTML code for the content has been escaped by the template engine. To fix this escaping, you can go ahead and use the following layout code, which has the content unescaped by changing `$body` to `$body->u()`. 

````php
<html>
	<head><title>Some Title Site!</title></head>
	<body>
		<h1>Some Title Site</h1>
		<hr/>
		<?= $body->u() ?>
	</body>
</html>
````

And this should now be properly rendered as:

[[A properly rendered output from the custom template|hello_improved_layout_screenshot.png|frame="figure"]]

We just overrode the layout! The default site builder has several other templates we can override. Heck, we can also define our own templates to be used within our overridden template. The possibilities for extending the look of your foonoo sites are endless.


## Rendering Custom Data
Although you're building static sites, sometimes you may have the need to inject some dynamic data. For example, you may want to add an easy to manage list of your projects to your personal home page, or you want to showcase your ever-growing recipe database. Regardless of your needs, Foonoo provides the infrastructure for you to inject, render, and style structured YML or JSON data for your site. 

Data to be rendered must be YAML or JSON formatted files placed in the `__foonoo/data` directory. The file's name should only alpha-numeric characters (preferable lower-case) and nothing else.

For example, if you wanted to add a list of projects to a site, you could start with by defining the template for rendering this data. This template could just be put directly into the site directory where other content reside. Whenever the site is rendered, a page with the same name as the template will be generated. 

In the case of this example, since you are creating a page to list projects, you could name this template page `my_projects.mustache`â€”explicitly implying you'll be using the mustache templating system.

At this point, you can put the following code into the `my_projects.mustache` file:

````html
<h1>Projects</h1>

{{#projects}}
	<h2>{{name}}</h2>
	<p>{{description}}</p>
{{/projects}}
````

Or if you wanted to use good old PHP, you could go with the following:

````php
<h1>Projects</h1>
<?php foreach($projects as $project): ?>
    <h2><?= $project["name"] ?></h2>
    <p><?= $project["description"] ?></p>
<?php endforeach; ?>
````

and save this file as `my_projects.tplphp`.

With these in place, you can create your `_foonoo/data/projects.yml` data file as follows:

````yaml
- name: Foonoo
  description: A tool for building static websites.
- name: Ntentan
  description: A manifestation of the sunken cost fallacy.
- name: Ananse Basic
  description: A programming language that lives in a deluded person's mind.
````

Or if you prefer JSON as your data format, you could go with the a `_foonoo/data/projects.json` as follows:

````JSON
[
    {
        "name": "Foonoo", 
        "description": "A tool for building static websites."
    },
    {
        "name": "Ntentan", 
        "description": "A manifestation of the sunken cost fallacy."
    },
    {
        "name": "Ananse Basic", 
        "description": "A programming language that lives in a deluded person's mind."
    }
]

````

Once these are in place, generating your site should yield a `my_projects.html` file that looks like below.



## Adding Menus


## Adding Content Navigation

## Adjusting Color Schemes
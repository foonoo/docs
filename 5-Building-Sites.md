# Building Sites

We've already established foonoo's multi-site generator architecture, and we've also looked at how it ships with a default site generator. In this chapter, we'll go into details about how sites can be built with the default site generator. By the end of this section, you should be able to build simple sites, like a personal home page, or complex ones, like the one serving this documentation.

Foonoo's default site generator provides a unique way of combining templates and text files—and even data in some cases—to generate sites. For most parts, the default site generator is heavily dependent on the themes that style the site's output to provide a lot of the features that tie sites together. In this section, we will take a look at how the default site generator can be used, and we will look at how the default theme that ships with foonoo allows us to build even more complex sites.

## The Default Generator and Theming
Sites in foonoo always have themes enabled when being generated. When simply rendering text files, the default site generator and its default theme are used. The default theme that ships with foonoo's default site generator is highly configurable. But you don't have to stick with it; you always have the opportunity to use your own themes.

When generating simple sites, where you are only rendering Markdown files, the default theme simply wraps the processed HTML output of the text file with HTML code that attaches a simple stylesheet to decorate the text. Beyond this blank default however, this theme can be configured to provide other valuable features, like title bars, navigation blocks, and even special colour schemes.

## Defining your own Templates
Templates form the basis of themes. They define what HTML (or other) code should be generated by supplying a "template" with holes that must be filled in. Templating for foonoo is provided by the honam template engine that ships with the ntentan framework. Honam provides a hierarchical template resolution system whereby a given hierarchy of paths is searched in its order when searching for templates to render HTML files.

The template hierarchy for resolving any foonoo template is fixed, and it's defined as follows in increasing order of priority:

- Templates in the `_foonoo/templates` directory are searched and applied first. These templates will typically be supplied by the person building the site, and they carry the highest priority to override any other templates.
- Next templates in special template paths supplied through the `templates` configuration of the `site.yml` file are searched. These templates can also be supplied by the site designer, and they are useful when you want to add your own templates outside the `_foonoo` directory.
- Afterwards, templates from the current active theme are searched. These templates are supplied by theme designers and are part of the current theme in use. Most template requests are expected to resolve here.
- Finally, the last place searched contains the built in templates for foonoo's tag parser. These templates are built into foonoo and they are meant to provide the templates for the HTML code generated by the tag parser (for things like links and images). 

So, now that we know how to find templates, how do we override them? Well, it's quite simple: the actual templates available at any time are mainly defined by those required by the theme and foonoo's tag parser. To override those, you create your own templates and place them in the `_foonoo/templates` directory.

### Overriding the Layout wrapper for the default theme
As an example, let's override the layout of the default site builder's theme. To do this, we could create a `layout.tplphp` file and place it into the `_foonoo/templates` directory. This template is required by the default site builder's theme to wrap all rendered content. A PHP variable named `$contents`, which contains the rendered HTML for any content, is exposed to the layout. We can put the following into the `layout.tplphp` file:

````php
<html>
	<head><title>Some Title Site!</title></head>
	<body>
		<h1>Some Title Site</h1>
		<hr/>
		<?= $body ?>
	</body>
</html>
````

If we should place this `layout.tplphp` file into the `_foonoo/templates` directory of our earlier [[example|Introduction]], we should have the following output:

[[The site after the layout code above has been applied|hello_layout_screenshot.png]]

Compared to the earlier example, this output is devoid of any styling, and rightfuly so, because all the styling is supplied by the default theme that we overrode. Also, you may have noticed that the raw HTML code was output, because it has been escaped by the template engine. To fix the escaping, you can go ahead and use the following layout code, with the `$body` unescaped `$body->u()`. 

````php
<html>
	<head><title>Some Title Site!</title></head>
	<body>
		<h1>Some Title Site</h1>
		<hr/>
		<?= $body->u() ?>
	</body>
</html>
````

And this should now be properly rendered as:

[[A properly rendered output from the custom template|hello_improved_layout_screenshot.png]]

We just overrode the layout! The default site builder has several other templates we can override. Heck, we can also define our own templates to be used within our overridden template. 


## Rendering YML Data
Although you're building static sites, sometimes you may have the need to inject some dynamic data. For example, you could add an easy to manage list of projects on your home page, or it could also be entries for your recipe database. Regardless of your needs, Foonoo provides infrastructure for authors to inject, render, and style structured YML or JSON data for your site. 

Data to be rendered must be YAML or JSON formatted files placed in the `__foonoo/data` directory. The file's name should only alpha-numeric characters (preferable lower-case) and nothing else.

For example, if we wanted to add a list of projects to a site, we could start with the template to render this data. This template could just be put directly into the site directory and when rendered a page, with the same name as the template, will be generated. In our case, since we are creating a page to list projects, we could name this template page `my_projects.mustache`—explicitly implying we'll be using the mustache templating system.

We could put the following code into our `my_projects.mustache` file:

````html
<h1>Projects</h1>

{{#projects}}
	<h2>{{name}}</h2>
	<p>{{description}}</p>
{{/projects}}
````

Or if we wanted to use good old PHP, we could put the following:

````php
<h1>Projects</h1>
<?php foreach($projects as $project): ?>
    <h2><?= $project["name"] ?></h2>
    <p><?= $project["description"] ?></p>
<?php endforeach; ?>
````

and save this file as `my_projects.tplphp`.

With these in place, you can create your data file as

## Adding Menus

## Adding Content Navigation

## Adjusting Color Schemes